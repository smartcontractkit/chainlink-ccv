pyroscope_url = "http://pyroscope:4040"

[server]
address = ":50051"

[healthCheck]
enabled = true

[storage]
type = "postgres"

[chainStatuses]
maxChainStatusesPerRequest = 100

[orphanRecovery]
enabled = false
intervalSeconds = 300

# Rate Limiting Configuration
[rateLimiting]
enabled = true

# Storage backend: "memory" (single instance) or "redis" (distributed)
[rateLimiting.storage]
type = "redis"

[rateLimiting.storage.redis]
key_prefix = "ratelimit"

# Default rate limits (applied to all callers unless overridden)
[rateLimiting.defaultLimits]
"/chainlink_ccv.v1.VerifierResultAPI/GetMessagesSince" = { limit_per_minute = 1200 }
"/chainlink_ccv.v1.VerifierResultAPI/GetVerifierResultForMessage" = { limit_per_minute = 6000 }

# Group-based rate limits (more restrictive than defaults for specific groups)
[rateLimiting.groupLimits.verifiers]
"/chainlink_ccv.v1.Aggregator/BatchWriteCommitCCVNodeData" = { limit_per_minute = 6000 }
"/chainlink_ccv.v1.Aggregator/WriteChainStatus" = { limit_per_minute = 60 }
"/chainlink_ccv.v1.Aggregator/ReadChainStatus" = { limit_per_minute = 60 }

[rateLimiting.groupLimits.monitoring]
"/chainlink_ccv.v1.VerifierResultAPI/GetMessagesSince" = { limit_per_minute = 200 }

[Monitoring]
Enabled = true
Type = "beholder"
[Monitoring.Beholder]
InsecureConnection = true
CACertFile = ""
OtelExporterGRPCEndpoint = ""
OtelExporterHTTPEndpoint = "otel-collector:4318"
LogStreamingEnabled = true
MetricReaderInterval = 5
TraceSampleRatio = 1.0
TraceBatchTimeout = 10

# Append committee config.
#[committees]
#[committees.default]
#[committees.default.quorumConfigs]
#[committees.default.quorumConfigs.12922642891491394802]
#committeeVerifierAddress = "0x9A676e781A523b5d0C0e43731313A708CB607508"
#threshold = 2
#
#[[committees.default.quorumConfigs.12922642891491394802.signers]]
#participantID = "default-participant1"
#addresses = ["0x2c127e1eea67c6ec6945652183d4f043141705b2"]
#
#[[committees.default.quorumConfigs.12922642891491394802.signers]]
#participantID = "default-participant2"
#addresses = ["0x2a3e6b4676d01c5afdd710f01d2b8870bdef182d"]
#[committees.default.quorumConfigs.3379446385462418246]
#committeeVerifierAddress = "0x9A676e781A523b5d0C0e43731313A708CB607508"
#threshold = 2
#
#[[committees.default.quorumConfigs.3379446385462418246.signers]]
#participantID = "default-participant1"
#addresses = ["0x2c127e1eea67c6ec6945652183d4f043141705b2"]
#
#[[committees.default.quorumConfigs.3379446385462418246.signers]]
#participantID = "default-participant2"
#addresses = ["0x2a3e6b4676d01c5afdd710f01d2b8870bdef182d"]
#[committees.default.quorumConfigs.4793464827907405086]
#committeeVerifierAddress = "0x9A676e781A523b5d0C0e43731313A708CB607508"
#threshold = 2
#
#[[committees.default.quorumConfigs.4793464827907405086.signers]]
#participantID = "default-participant1"
#addresses = ["0x2c127e1eea67c6ec6945652183d4f043141705b2"]
#
#[[committees.default.quorumConfigs.4793464827907405086.signers]]
#participantID = "default-participant2"
#addresses = ["0x2a3e6b4676d01c5afdd710f01d2b8870bdef182d"]
#[committees.default.sourceVerifierAddresses]
#12922642891491394802 = "0x9A676e781A523b5d0C0e43731313A708CB607508"
#3379446385462418246 = "0x9A676e781A523b5d0C0e43731313A708CB607508"
#4793464827907405086 = "0x9A676e781A523b5d0C0e43731313A708CB607508"
