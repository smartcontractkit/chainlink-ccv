pyroscope_url = "http://pyroscope:4040"

[server]
address = ":50051"

[healthCheck]
enabled = true

[storage]
type = "postgres"

[chainStatuses]
maxChainStatusesPerRequest = 100

[orphanRecovery]
enabled = false
intervalSeconds = 300

# Rate Limiting Configuration
[rateLimiting]
enabled = true

# Storage backend: "memory" (single instance) or "redis" (distributed)
[rateLimiting.storage]
type = "redis"

[rateLimiting.storage.redis]
key_prefix = "ratelimit"

# Default rate limits (applied to all callers unless overridden)
[rateLimiting.defaultLimits]
"/chainlink_ccv.v1.VerifierResultAPI/GetMessagesSince" = { limit_per_minute = 1200 }
"/chainlink_ccv.v1.VerifierResultAPI/GetVerifierResultForMessage" = { limit_per_minute = 6000 }

# Group-based rate limits (more restrictive than defaults for specific groups)
[rateLimiting.groupLimits.verifiers]
"/chainlink_ccv.v1.Aggregator/BatchWriteCommitCCVNodeData" = { limit_per_minute = 6000 }
"/chainlink_ccv.v1.Aggregator/WriteChainStatus" = { limit_per_minute = 60 }
"/chainlink_ccv.v1.Aggregator/ReadChainStatus" = { limit_per_minute = 60 }

[rateLimiting.groupLimits.monitoring]
"/chainlink_ccv.v1.VerifierResultAPI/GetMessagesSince" = { limit_per_minute = 200 }

[rateLimiting.groupLimits.indexer]
"/chainlink_ccv.v1.VerifierResultAPI/GetVerifierResultForMessage" = { limit_per_minute = 6000 }
"/chainlink_ccv.v1.VerifierResultAPI/BatchGetVerifierResultForMessage" = { limit_per_minute = 6000 }
"/chainlink_ccv.v1.VerifierResultAPI/GetMessagesSince" = { limit_per_minute = 1200 }


[Monitoring]
Enabled = true
Type = "beholder"
[Monitoring.Beholder]
InsecureConnection = true
CACertFile = ""
OtelExporterGRPCEndpoint = ""
OtelExporterHTTPEndpoint = "otel-collector:4318"
LogStreamingEnabled = true
MetricReaderInterval = 5
TraceSampleRatio = 1.0
TraceBatchTimeout = 10

# Append committee config.
# [committee]
#   [committee.quorumConfigs]
#     # Format: [committee.quorumConfigs.DESTINATION_SELECTOR.SOURCE_SELECTOR]
#     # Note: Source and destination selectors must be different
#     [committee.quorumConfigs.12922642891491394802.3379446385462418246]
#       committeeVerifierAddress = "0x4ed7c70F96B99c776995fB64377f0d4aB3B0e1C1"
#       threshold = 2

#       [[committee.quorumConfigs.12922642891491394802.3379446385462418246.signers]]
#         address = "0x1745efc64c2e61f2e250b7ef79f34c4ec9af092b"

#       [[committee.quorumConfigs.12922642891491394802.3379446385462418246.signers]]
#         address = "0x313624fd004760c40323476003ac7789dd534f94"

#     [committee.quorumConfigs.12922642891491394802.4793464827907405086]
#       committeeVerifierAddress = "0x4ed7c70F96B99c776995fB64377f0d4aB3B0e1C1"
#       threshold = 2

#       [[committee.quorumConfigs.12922642891491394802.4793464827907405086.signers]]
#         address = "0x1745efc64c2e61f2e250b7ef79f34c4ec9af092b"

#       [[committee.quorumConfigs.12922642891491394802.4793464827907405086.signers]]
#         address = "0x313624fd004760c40323476003ac7789dd534f94"
