manifest should match snapshot:
  1: |
    apiVersion: k8s.chain.link/v1alpha1
    kind: ChainlinkNode
    metadata:
      annotations:
        chainlinknode.k8s.chain.link/create-v2: "true"
        chainlinknode.k8s.chain.link/init-rds: "true"
        chainlinknode.k8s.chain.link/init-rds-idx: "0"
        chainlinknode.k8s.chain.link/preserve-ssm: "true"
      labels:
        app.chain.link/blockchain: ethereum
        app.chain.link/network: sepolia
        app.chain.link/network_type: testnet
        app.chain.link/product: example
        app.chain.link/team: infra
        app.kubernetes.io/component: chainlink-example-node
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cln-misc-s-n-o-s
        app.kubernetes.io/version: 2.5.0
      name: cln-misc-s-n-0
    spec:
      credentials:
        config:
          api:
            key: .api
            password: ""
            user: admin@chain.link
          keystore:
            key: .keystore
            password: ""
          vrf:
            key: .vrf
            password: ""
        secretName: cln-misc-s-n-0-creds
        storageType: aws:ssm
      database:
        config:
          database: ""
          host: ""
          password: ""
          port: "5432"
          user: ""
        secretName: cln-misc-s-n-0-db
        storageType: aws:ssm
  2: |
    apiVersion: v1
    data:
      sidecar: |
        receivers:
          otlp:
            protocols:
              grpc:
                endpoint: 0.0.0.0:4317
                include_metadata: true
                max_recv_msg_size_mib: 16
              http:
                endpoint: 0.0.0.0:4318
                include_metadata: true
        processors:
          batch:
            metadata_keys:
              - X-Beholder-Node-Auth-Token
            send_batch_size: 512
            timeout: 5s
          k8sattributes:
            passthrough: true
          memory_limiter:
            check_interval: 5s
            limit_mib: 256
            spike_limit_mib: 64
          resource:
            attributes:
              - action: insert
                key: k8s.pod.uid
                value: ${OTEL_RESOURCE_ATTRIBUTES_POD_UID}
              - action: insert
                key: k8s.pod.ip
                value: ${POD_IP}
              - action: insert
                key: k8s.pod.name
                value: ${POD_NAME}
              - action: upsert
                # Config version attribute for rollout / config diff correlation.
                key: config_version
                value: "v1"
        exporters:
          debug:
            verbosity: detailed
          otlphttp:
            auth:
              authenticator: headers_setter
            endpoint: https://staging.telemetry.chain.link:443
            tls:
              insecure: false
        extensions:
          headers_setter:
            headers:
            - action: insert
              from_context: X-Beholder-Node-Auth-Token
              key: X-Beholder-Node-Auth-Token
          health_check:
            endpoint: ${env:MY_POD_IP}:13133
        service:
          extensions:
            - headers_setter
          telemetry:
            logs:
              level: INFO
              encoding: json
          pipelines:
            logs:
              exporters:
                - otlphttp
              processors:
                - k8sattributes
                - resource
                - memory_limiter
                - batch
              receivers:
                - otlp
            metrics:
              exporters:
                - otlphttp
              processors:
                - resource
                - k8sattributes
                - memory_limiter
                - batch
              receivers:
                - otlp
            traces:
              exporters:
                - otlphttp
              processors:
                - k8sattributes
                - resource
                - memory_limiter
                - batch
              receivers:
                - otlp
    kind: ConfigMap
    metadata:
      labels:
        app.chain.link/blockchain: ethereum
        app.chain.link/network: sepolia
        app.chain.link/network_type: testnet
        app.chain.link/product: example
        app.chain.link/team: infra
        app.kubernetes.io/component: chainlink-example-node
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cln-misc-s-n-o-s
        app.kubernetes.io/version: 2.5.0
      name: cln-misc-s-n-0-cm-otel
  3: |
    apiVersion: v1
    data:
      00-defaults-node-config.toml: |
        RootDir = '/home/chainlink'

        [Database]
          MaxIdleConns = 20
          MaxOpenConns = 40
          MigrateOnStartup = true

        [Log]
          Level = 'info'
          JSONConsole = true

        [Log.File]
          MaxSize = '0b'

        [WebServer]
          AllowOrigins = '*'
          HTTPPort = 6688
          SecureCookies = false

          [WebServer.RateLimit]
            Authenticated = 2000
            Unauthenticated = 100

          [WebServer.TLS]
            HTTPSPort = 0
      01-networks.toml: |
        [[EVM]]
          ChainID = "11155111"

          [[EVM.Nodes]]
            HTTPURL = "https://nd-611-802-295.p2pify.com/05541dd996d9d812e580c32477f70b1a"
            Name = "11155111_primary_Chainstack_0"
            SendOnly = false
            WSURL = "wss://ws-nd-611-802-295.p2pify.com/05541dd996d9d812e580c32477f70b1a"

          [[EVM.Nodes]]
            HTTPURL = "https://chainlinklabs-sepolia-geth-fullnode-01.bdnodes.net/?auth=waYM-neMbBEC2Nlg2u-8vcC6JFNWB5W-Yv-deQuHGAk"
            Name = "11155111_primary_Blockdaemon_1"
            SendOnly = false
            WSURL = "wss://chainlinklabs-sepolia-geth-fullnode-01.bdnodes.net:8443/websocket?auth=waYM-neMbBEC2Nlg2u-8vcC6JFNWB5W-Yv-deQuHGAk"

          [[EVM.Nodes]]
            HTTPURL = "https://ethereum-sepolia-1.simplystaking.xyz/DFKJSDFKJNSD/rpc/"
            Name = "11155111_primary_SimplyVC_2"
            SendOnly = false
            WSURL = "wss://ethereum-sepolia-1.simplystaking.xyz/DFKJSDFKJNSD/ws/"
      otel-config.toml: |
        [Telemetry]
          Enabled = true # Enabled turns telemetry collection on or off.
          Endpoint = 'localhost:4317' # Endpoint of the OTEL Collector.
          InsecureConnection = true # Default
          TraceSampleRatio = 0.01 # TraceSampleRatio is the rate at which to sample traces. Must be between 0 and 1.
        [Telemetry.ResourceAttributes]
          deployed_by = "chainlink-labs" # DeployedBy is the name of the entity that deployed the service.
    kind: ConfigMap
    metadata:
      labels:
        app.chain.link/blockchain: ethereum
        app.chain.link/network: sepolia
        app.chain.link/network_type: testnet
        app.chain.link/product: example
        app.chain.link/team: infra
        app.kubernetes.io/component: chainlink-example-node
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cln-misc-s-n-o-s
        app.kubernetes.io/version: 2.5.0
      name: cln-misc-s-n-0-cm-v2
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.chain.link/blockchain: ethereum
        app.chain.link/network: sepolia
        app.chain.link/network_type: testnet
        app.chain.link/product: example
        app.chain.link/team: infra
        app.kubernetes.io/component: chainlink-example-node
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cln-misc-s-n-o-s
        app.kubernetes.io/version: 2.5.0
      name: cln-misc-s-n-0
    spec:
      replicas: 1
      selector:
        matchLabels:
          app.kubernetes.io/instance: cln-misc-s-n-0
          app.kubernetes.io/name: cln-misc-s-n-o-s
      template:
        metadata:
          annotations:
            checksum/config-v2: 8356c8f2158dd6075f39f56e6f9e5bf65be770a8ac941af28002f6b703dea497
          labels:
            app.chain.link/blockchain: ethereum
            app.chain.link/network: sepolia
            app.chain.link/network_type: testnet
            app.chain.link/product: example
            app.chain.link/team: infra
            app.kubernetes.io/component: chainlink-example-node
            app.kubernetes.io/instance: cln-misc-s-n-0
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: cln-misc-s-n-o-s
            app.kubernetes.io/version: 2.5.0
        spec:
          containers:
            - args:
                - -c
                - /v2Config/00-defaults-node-config.toml
                - -c
                - /v2Config/01-networks.toml
                - -c
                - /v2Config/otel-config.toml
                - -s
                - /v2Secret/secret.toml
                - local
                - "n"
                - -a
                - /v2Secret/.api
              image: public.ecr.aws/chainlink/chainlink:2.5.0
              imagePullPolicy: IfNotPresent
              name: chainlink-cluster
              ports:
                - containerPort: 6690
                  name: p2pv1
                  protocol: TCP
                - containerPort: 5001
                  name: p2pv2
                  protocol: TCP
                - containerPort: 6688
                  name: http
                  protocol: TCP
              resources:
                limits:
                  cpu: 500m
                  memory: 1024Mi
                requests:
                  cpu: 250m
                  memory: 512Mi
              volumeMounts:
                - mountPath: /v2Config
                  name: cln-misc-s-n-0-cm-v2
                  readOnly: true
                - mountPath: /v2Secret
                  name: cln-misc-s-n-0-v2
                  readOnly: true
            - args:
                - --config=/conf/sidecar.yaml
              env:
                - name: POD_IP
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: status.podIP
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.name
                - name: OTEL_RESOURCE_ATTRIBUTES_POD_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.name
                - name: OTEL_RESOURCE_ATTRIBUTES_POD_UID
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: metadata.uid
                - name: OTEL_RESOURCE_ATTRIBUTES_NODE_NAME
                  valueFrom:
                    fieldRef:
                      apiVersion: v1
                      fieldPath: spec.nodeName
              image: otel/opentelemetry-collector-contrib:0.126.0
              imagePullPolicy: IfNotPresent
              name: chainlink-cluster-otel-sidecar
              ports:
                - containerPort: 8888
                  name: metrics
                  protocol: TCP
                - containerPort: 4317
                  name: otlp-grpc
                  protocol: TCP
                - containerPort: 4318
                  name: otlp-http
                  protocol: TCP
              resources:
                limits:
                  cpu: 250m
                  memory: 256Mi
                requests:
                  cpu: 125m
                  memory: 128Mi
              volumeMounts:
                - mountPath: /conf
                  name: cln-misc-s-n-0-cm-otel
          enableServiceLinks: false
          initContainers:
            - args:
                - -c
                - |
                  while ! pg_isready -d $POSTGRES_DB -h $POSTGRES_HOST -p $POSTGRES_PORT -U $POSTGRES_USER; do sleep 1; done;
              command:
                - /bin/bash
              envFrom:
                - secretRef:
                    name: cln-misc-s-n-0-db
              image: 925774240219.dkr.ecr.us-west-2.amazonaws.com/containers/debian-12/postgresql:16.10.0-debian-12-r9
              imagePullPolicy: IfNotPresent
              name: init-db-check
          topologySpreadConstraints:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: cln-misc-s-n-o-s
              maxSkew: 1
              topologyKey: topology.kubernetes.io/zone
              whenUnsatisfiable: ScheduleAnyway
          volumes:
            - configMap:
                name: cln-misc-s-n-0-cm-v2
              name: cln-misc-s-n-0-cm-v2
            - name: cln-misc-s-n-0-v2
              secret:
                secretName: cln-misc-s-n-0-v2
            - configMap:
                defaultMode: 420
                items:
                  - key: sidecar
                    path: sidecar.yaml
                name: cln-misc-s-n-0-cm-otel
              name: cln-misc-s-n-0-cm-otel
  5: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.chain.link/blockchain: ethereum
        app.chain.link/network: sepolia
        app.chain.link/network_type: testnet
        app.chain.link/product: example
        app.chain.link/team: infra
        app.kubernetes.io/component: chainlink-example-node
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cln-misc-s-n-o-s
        app.kubernetes.io/version: 2.5.0
      name: cln-misc-s-n-0
    spec:
      ports:
        - name: http
          port: 6688
          protocol: TCP
          targetPort: http
        - name: p2pv1
          port: 6690
          protocol: TCP
          targetPort: p2pv1
        - name: p2pv2
          port: 5001
          protocol: TCP
          targetPort: p2pv2
      selector:
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/name: cln-misc-s-n-o-s
      type: ClusterIP
  6: |
    apiVersion: monitoring.coreos.com/v1
    kind: ServiceMonitor
    metadata:
      labels:
        app.chain.link/blockchain: ethereum
        app.chain.link/network: sepolia
        app.chain.link/network_type: testnet
        app.chain.link/product: example
        app.chain.link/team: infra
        app.kubernetes.io/component: chainlink-example-node
        app.kubernetes.io/instance: cln-misc-s-n-0
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cln-misc-s-n-o-s
        app.kubernetes.io/version: 2.5.0
        release: grafana-agent
      name: cln-misc-s-n-0
    spec:
      endpoints:
        - path: /metrics
          port: http
          relabelings:
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_kubernetes_io_component
              targetLabel: component
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_kubernetes_io_version
              targetLabel: version
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_chain_link_team
              targetLabel: team
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_chain_link_product
              targetLabel: product
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_chain_link_blockchain
              targetLabel: blockchain
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_chain_link_network
              targetLabel: network
            - action: replace
              sourceLabels:
                - __meta_kubernetes_service_label_app_chain_link_network_type
              targetLabel: network_type
      selector:
        matchLabels:
          app.kubernetes.io/instance: cln-misc-s-n-0
          app.kubernetes.io/name: cln-misc-s-n-o-s
