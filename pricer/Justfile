set fallback

import '../tools/lib/utils.justfile'

# Default: show available recipes
default:
    just --list

build:
    docker build -f Dockerfile -t pricer:latest ..

# Run pricer locally. Requires KEYSTORE_DATA (base64) and KEYSTORE_PASSWORD env vars.
# Example: KEYSTORE_DATA=$(cat keystore.json | base64) KEYSTORE_PASSWORD=pass just run
run config="config.example.toml": build
    docker run --rm \
        -e KEYSTORE_DATA \
        -e KEYSTORE_PASSWORD \
        -v {{justfile_directory()}}/{{config}}:/config.toml \
        pricer:latest run --config /config.toml

clean:
    docker rmi pricer:latest
