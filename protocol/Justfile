set fallback

import '../tools/lib/utils.justfile'

# Default: show available recipes
default:
    just --list

test: ensure-go
    go test -v ./...

test-coverage:
    go test -v -coverprofile=coverage.out ./...

# Format all go files
fmt: ensure-golangci-lint
    golangci-lint fmt

# Run golangci-lint
lint fix="": ensure-golangci-lint
    golangci-lint run --output.text.path stdout {{ if fix != "" { "--fix" } else { "" } }}

mod-tidy: ensure-go
    go mod tidy

mod-download: ensure-go
    go mod download
