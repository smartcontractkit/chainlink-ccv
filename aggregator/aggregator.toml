stubQuorumValidation = false
pyroscope_url = "http://pyroscope:4040"

[server]
  address = ":50051"

[storage]
  type = "dynamodb"
  
  [storage.dynamoDB]
    region = "us-east-1"
    endpoint = "http://aggregator-dynamodb:8000" # Local DynamoDB endpoint for development
    commitVerificationRecordTableName = "commit_verification_records"
    finalizedFeedTableName = "aggregated_reports"
    checkpointTableName = "checkpoint_records"

[apiKeys]
  [apiKeys.clients.dev-api-key-verifier-1]
    clientId = "verifier-1"
    description = "Development verifier 1"
    enabled = true
    groups = ["verifiers"]
    [apiKeys.clients.dev-api-key-verifier-1.secrets]
      primary = "dev-secret-verifier-1"

  [apiKeys.clients.dev-api-key-verifier-2]
    clientId = "verifier-2"
    description = "Development verifier 2"
    enabled = true
    groups = ["verifiers"]
    [apiKeys.clients.dev-api-key-verifier-2.secrets]
      primary = "dev-secret-verifier-2"

  [apiKeys.clients.dev-api-key-monitoring]
    clientId = "monitoring"
    description = "Monitoring and infrastructure client for read-only access"
    enabled = true
    groups = ["monitoring"]
    [apiKeys.clients.dev-api-key-monitoring.secrets]
      primary = "dev-secret-monitoring"

[checkpoints]
  maxCheckpointsPerRequest = 100

[orphanRecovery]
  enabled = false
  intervalSeconds = 300

# Rate Limiting Configuration
[rateLimiting]
  enabled = true
  
  # Storage backend: "memory" (single instance) or "redis" (distributed)
  [rateLimiting.storage]
    type = "redis"
    
    [rateLimiting.storage.redis]
      address = "aggregator-redis:6379"
      password = ""
      db = 0
      key_prefix = "ratelimit"
  
  # Default rate limits (applied to all callers unless overridden)
  [rateLimiting.defaultLimits]
    "/chainlink_ccv.v1.CCVData/GetMessagesSince" = { limit_per_minute = 90 }
  
  # Group-based rate limits (more restrictive than defaults for specific groups)
  [rateLimiting.groupLimits.verifiers]
    "/chainlink_ccv.v1.Aggregator/BatchWriteCommitCCVNodeData" = { limit_per_minute = 6000 }
    "/chainlink_ccv.v1.Aggregator/WriteBlockCheckpoint" = { limit_per_minute = 5 }
    "/chainlink_ccv.v1.Aggregator/ReadBlockCheckpoint" = { limit_per_minute = 5 }
  
  [rateLimiting.groupLimits.monitoring]
    "/chainlink_ccv.v1.CCVData/GetMessagesSince" = { limit_per_minute = 200 }

[committees]
  [committees.default]
    [committees.default.quorumConfigs]
      [committees.default.quorumConfigs.12922642891491394802]
        committeeVerifierAddress = "0x0B306BF915C4d645ff596e518fAf3F9669b97016"
        threshold = 2

        [[committees.default.quorumConfigs.12922642891491394802.signers]]
          participantID = "participant1"
          addresses = ["0x6b3131d871c63c7fa592863e173cba2da5ffa68b"]

        [[committees.default.quorumConfigs.12922642891491394802.signers]]
          participantID = "participant2"
          addresses = ["0x099125558781da4bcdb16e457e15d997ecac68a8"]
      [committees.default.quorumConfigs.3379446385462418246]
        committeeVerifierAddress = "0x0B306BF915C4d645ff596e518fAf3F9669b97016"
        threshold = 2

        [[committees.default.quorumConfigs.3379446385462418246.signers]]
          participantID = "participant1"
          addresses = ["0x6b3131d871c63c7fa592863e173cba2da5ffa68b"]

        [[committees.default.quorumConfigs.3379446385462418246.signers]]
          participantID = "participant2"
          addresses = ["0x099125558781da4bcdb16e457e15d997ecac68a8"]
      [committees.default.quorumConfigs.4793464827907405086]
        committeeVerifierAddress = "0x0B306BF915C4d645ff596e518fAf3F9669b97016"
        threshold = 1

        [[committees.default.quorumConfigs.4793464827907405086.signers]]
          participantID = "participant1"
          addresses = ["0x6b3131d871c63c7fa592863e173cba2da5ffa68b"]
    [committees.default.sourceVerifierAddresses]
      12922642891491394802 = "0x0B306BF915C4d645ff596e518fAf3F9669b97016"
      3379446385462418246 = "0x0B306BF915C4d645ff596e518fAf3F9669b97016"
      4793464827907405086 = "0x0B306BF915C4d645ff596e518fAf3F9669b97016"

[Monitoring]
Enabled = true
Type = "beholder"
[Monitoring.Beholder]
InsecureConnection = true
CACertFile = ""
OtelExporterGRPCEndpoint = ""
OtelExporterHTTPEndpoint = "otel-collector:4318"
LogStreamingEnabled = true
MetricReaderInterval = 5
TraceSampleRatio = 1.0
TraceBatchTimeout = 10